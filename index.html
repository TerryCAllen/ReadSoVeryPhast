<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Read So Very Phast</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Help Icon (top-left, only when paused) -->
    <div id="helpIcon" class="help-icon hidden">?</div>

    <!-- Search Icon (top-left, next to help, only when paused) -->
    <div id="searchIcon" class="search-icon hidden" title="Search">‚åï</div>

    <!-- Save Icon (top-left, next to help, only when unsaved text) -->
    <div id="saveIcon" class="save-icon hidden" title="Save to Library">üíæ</div>

    <!-- Settings Menu Icon -->
    <div id="settingsIcon" class="settings-icon">‚ò∞</div>

    <!-- Library Panel (hidden by default) -->
    <div id="libraryPanel" class="library-panel hidden">
        <div class="library-header">
            <h2>My Reading Library</h2>
            <button id="closeLibrary" class="close-button">√ó</button>
        </div>
        <div class="library-content">
            <div id="libraryList" class="library-list">
                <!-- Library items will be dynamically inserted here -->
            </div>
            <div id="libraryEmpty" class="library-empty hidden">
                <p>Your library is empty.</p>
                <p>Load text or use the bookmarklet to add documents.</p>
            </div>
            <div id="storageUsage" class="storage-usage">
                <p>Storage: <span id="storagePercent">0</span>% used (<span id="storageDocCount">0</span> documents)</p>
            </div>
        </div>
    </div>

    <!-- Save to Library Panel (hidden by default) -->
    <div id="saveToLibraryPanel" class="save-to-library-panel hidden">
        <div class="save-to-library-header">
            <h2>Save to Library</h2>
            <button id="closeSaveToLibrary" class="close-button">√ó</button>
        </div>
        <div class="save-to-library-content">
            <div class="setting-group">
                <label for="documentTitleInput">Document Title</label>
                <input type="text" id="documentTitleInput" placeholder="Enter title or use auto-generated...">
            </div>
            <button id="saveToLibraryButton" class="save-button">Save to Library</button>
        </div>
    </div>

    <!-- Settings Panel (hidden by default) -->
    <div id="settingsPanel" class="settings-panel hidden">
        <div class="settings-header">
            <h2>Settings</h2>
            <button id="closeSettings" class="close-button">√ó</button>
        </div>
        <div class="settings-content">
            <button id="myLibraryButton" class="my-library-button">My Library</button>
            <button id="loadNewTextButton" class="load-new-text-button">Load New Text</button>
            
            <div class="setting-group">
                <label for="wpmSetting">Words Per Minute (WPM)</label>
                <input type="number" id="wpmSetting" min="50" max="1000" step="10" value="200">
            </div>
            <div class="setting-group">
                <label for="wpmIncrementSetting">WPM Increment</label>
                <input type="number" id="wpmIncrementSetting" min="1" max="100" step="1" value="5">
            </div>
            <div class="setting-group">
                <label for="wordFontSizeSetting">Word Display Font Size (px)</label>
                <input type="number" id="wordFontSizeSetting" min="40" max="150" step="10" value="80">
            </div>
            <div class="setting-group">
                <label for="paragraphFontSizeSetting">Paragraph Font Size (px)</label>
                <input type="number" id="paragraphFontSizeSetting" min="12" max="24" step="2" value="16">
            </div>
            <div class="setting-group">
                <label for="themeToggle">Theme</label>
                <select id="themeToggle" class="theme-select">
                    <option value="dark">Dark Mode (Amber)</option>
                    <option value="light">Light Mode (Blue)</option>
                </select>
            </div>
            <button id="saveSettings" class="save-button">Save Settings</button>
        </div>
    </div>

    <!-- Progress Detail Panel (hidden by default) -->
    <div id="progressDetailPanel" class="progress-detail-panel hidden">
        <div class="progress-detail-header">
            <h2>Reading Progress</h2>
            <button id="closeProgressDetail" class="close-button">√ó</button>
        </div>
        <div class="progress-detail-content">
            <p id="progressDetailLine1" class="progress-detail-line">Word 0 of 0</p>
            <p id="progressDetailLine2" class="progress-detail-line">0% Complete</p>
            <p id="progressDetailLine3" class="progress-detail-line">Estimated 0 minutes remaining</p>
        </div>
    </div>

    <!-- Help Panel (hidden by default) -->
    <div id="helpPanel" class="help-panel hidden">
        <div class="help-header">
            <h2>How to Use</h2>
            <button id="closeHelp" class="close-button">√ó</button>
        </div>
        <div class="help-content">
            <h2 class="help-title"><span class="rsvp-letter">R</span>ead <span class="rsvp-letter">S</span>o <span class="rsvp-letter">V</span>ery <span class="rsvp-letter">P</span>hast</h2>
            
            <h3>Getting Started</h3>
            <p>‚Ä¢ <a href="bookmarklet.html" target="_blank" style="color: var(--color-accent); text-decoration: underline;">Install Bookmarklet</a> to speed-read any web page<br>
            ‚Ä¢ Or click "Load Text" to paste your content<br>
            ‚Ä¢ Press Play (center) or Space to start reading</p>
            
            <h3>Touch/Click Controls</h3>
            <p>‚Ä¢ <strong>Center:</strong> Play/Pause<br>
            ‚Ä¢ <strong>Up:</strong> Speed up (reading) / Scroll up (paused)<br>
            ‚Ä¢ <strong>Down:</strong> Slow down (reading) / Scroll down (paused)<br>
            ‚Ä¢ <strong>Left:</strong> Jump to sentence start / Previous sentence<br>
            ‚Ä¢ <strong>Right:</strong> Next sentence</p>
            
            <h3>Keyboard Shortcuts</h3>
            <p>‚Ä¢ <strong>Space:</strong> Play/Pause<br>
            ‚Ä¢ <strong>‚Üë:</strong> Increase speed<br>
            ‚Ä¢ <strong>‚Üì:</strong> Decrease speed<br>
            ‚Ä¢ <strong>‚Üê:</strong> Previous/restart sentence<br>
            ‚Ä¢ <strong>‚Üí:</strong> Next sentence</p>
            
            <p style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--color-text-dim);">
            Click <strong>‚ò∞</strong> for settings (WPM, theme, font size)</p>
            
            <p style="text-align: center; color: var(--color-text-dim); font-size: 11px; margin-top: 20px;">
            Version <span id="appVersion"></span></p>
        </div>
    </div>

    <!-- Text Input Panel (hidden by default) -->
    <div id="textInputPanel" class="text-input-panel hidden">
        <div class="text-input-header">
            <h2>Load Text</h2>
            <button id="closeTextInput" class="close-button">√ó</button>
        </div>
        <div class="text-input-content">
            <textarea id="textInputArea" placeholder="Paste your text here..."></textarea>
            <button id="loadTextButton" class="load-button">Load Text</button>
        </div>
    </div>

    <!-- Search Panel (hidden by default) -->
    <div id="searchPanel" class="search-panel hidden">
        <div class="search-header">
            <h2>Search Document</h2>
            <button id="closeSearch" class="close-button">√ó</button>
        </div>
        <div class="search-content">
            <div class="search-input-group">
                <input type="text" id="searchInput" placeholder="Enter search term...">
                <button id="searchButton" class="search-button" disabled>Search</button>
            </div>
            <div id="searchResults" class="search-results">
                <div id="searchResultsList" class="search-results-list">
                    <!-- Search results will be dynamically inserted here -->
                </div>
                <div id="searchNoResults" class="search-no-results hidden">
                    <p>No results found.</p>
                </div>
                <div id="searchPrompt" class="search-prompt">
                    <p>Enter a search term to find sentences in the current document.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="appContainer" class="app-container">
        
        <!-- Top Section: Word Display -->
        <div id="wordDisplay" class="word-display">
            <div id="currentWord" class="current-word"></div>
        </div>

        <!-- Middle Section: Paragraph Display -->
        <div id="paragraphDisplay" class="paragraph-display">
            <div id="paragraphContent" class="paragraph-content"></div>
        </div>

    <!-- Bottom Section: Controls -->
    <div id="controlsArea" class="controls-area">
        <!-- Document Title Display -->
        <div id="documentTitle" class="document-title"></div>
        
        <!-- Up Control -->
        <div id="controlUp" class="control-region control-up">
            <span class="control-icon">‚ñ≤</span>
        </div>

            <!-- Left Control -->
            <div id="controlLeft" class="control-region control-left">
                <span class="control-icon">‚óÑ</span>
            </div>

            <!-- Center Play/Pause Button -->
            <div id="controlCenter" class="control-region control-center">
                <span id="playPauseIcon" class="control-icon">‚ñ∂</span>
            </div>

            <!-- Right Control -->
            <div id="controlRight" class="control-region control-right">
                <span class="control-icon">‚ñ∫</span>
            </div>

            <!-- Down Control -->
            <div id="controlDown" class="control-region control-down">
                <span class="control-icon">‚ñº</span>
            </div>

            <!-- Speed Display -->
            <div id="speedDisplay" class="speed-display">200 WPM</div>
            
            <!-- Progress Stats Display (shown when paused) -->
            <div id="progressStats" class="progress-stats hidden">
                <div id="progressLine1">Word 0 of 0 (0%)</div>
                <div id="progressLine2">Est. Time: 0 minutes</div>
                <div id="progressLine3" class="progress-line3"></div>
            </div>
        </div>

        <!-- No Text Loaded Message -->
        <div id="noTextMessage" class="no-text-message">
            <p>No text loaded.</p>
            <button id="loadTextPrompt" class="load-text-prompt">Load Text</button>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="storage.js"></script>
    <script src="library.js"></script>
    <script src="textProcessor.js"></script>
    <script src="reader.js"></script>
    <script src="controls.js"></script>
    <script src="settings.js"></script>
    <script src="main.js"></script>
</body>
</html>